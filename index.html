<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Drake Famjam</title>

<!--
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ZIM Zapps
Progressive Web App (PWA) tool output from
https://zimjs.com/zapps 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-->

<!-- ZIM PWA STEP 1 - MANIFEST -->
<link rel="manifest" href="manifest.json">

<!-- ZIM PWA STEP 2 - META -->
<meta name="apple-mobile-web-app-title" content="Drake Famjam">
<meta name="theme-color" content="#333333">
<meta name="msapplication-TileColor" content="#333333">

<meta name="viewport" content="width=device-width, user-scalable=no">
<link rel="apple-touch-icon" href="icons/icon_152.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="msapplication-TileImage" content="icons/icon_144.png">

<!-- should have faveicons - see link below -->
<!-- see https://www.favicon-generator.org/ -->

<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="msapplication-starturl" content="./">

<!-- ZIM PWA STEP 3 - SERVICE WORKER -->
<script>
	window.addEventListener("DOMContentLoaded", function () {
		if (location.protocol === "https:" && "serviceWorker" in navigator) navigator.serviceWorker.register("./serviceworker.js");
	});
</script>

<script src="libraries/createjs.js"></script>
<script src="libraries/zim_min.js"></script>
<script src="libraries/box2d.js"></script>
<script src="libraries/physics_2.2.js"></script>
    <!-- zimjs.com - JavaScript Canvas Framework -->
    <script type="module">
      //import zim from "https://zimjs.org/cdn/016/zim_game";

      // See Docs under Frame for FIT, FILL, FULL, and TAG
      const pics="drake.png";
      const assets = [
        pics,
        "drake.jpg",
        "onedance.mp3",
        "hotlinebling.mp3",
        "dance1.png",
        "dance2.png",
        "head.png",
        "drake.png",
        "Anton.ttf",
        "Ubuntu.ttf",
		"home.png",
		"close.png"
	]
      const path = "assets/";

      new Frame({
        scaling: FIT,
        width: 1170,
        height: 2532,
        color: black,
        outerColor: black,
        ready: ready,
        sensors: true,
        assets:assets,
        path:path,
      });
      function ready() {

	// ZIM PWA STEP 4 - ADD TO HOME SCREEN (A2HS)
	// NOTE: new PWA() works with ZIM Cat 04 or beyond
	// Message shows if only if running from mobile Browser
	// See https://zimjs.com/docs.html?item=PWA for more options

	new PWA(runZapp);
	function runZapp() {
	
	      
	
	        const sound = new Aud({file:"onedance.mp3", loop:true});
	        const soundInstance = sound.play();
	        
	    
	
	        let head;
	        let firstScreen=new Container(W,H).center();
	       
	        const drake=new Pic("drake.jpg").alp(0.3).center().bot();
	
	        const heading=new Label({
	          text:"DRAKE FAMJAM", 
	          size:180, 
	          font:"Anton", 
	          color:white,
	        }).pos(0,200,CENTER,TOP);
	
	        const heading2=new Label({
	          text:"Are you a Drake fan?", 
	          size:70, 
	          font:"Ubuntu", 
	          color:white,
	        }).pos(0,500,CENTER,TOP,firstScreen);
	
	        const heading4=new Label({
	          text:"Have some fun here!", 
	          size:70, 
	          font:"Ubuntu", 
	          color:white,
	        }).pos(0,600,CENTER,TOP,firstScreen);
	
	        const heading3=new Label({
	          text:"Rotate your phone to see Drake move", 
	          size:50, font:"Ubuntu", 
	          color:white,
	          lineWidth:700, 
	          lineHeight:80, 
	          align:CENTER
	        }).pos(0,700,CENTER,TOP,firstScreen);

			const home=new Pic("home.png").reg(CENTER).pos(0,80,CENTER,BOTTOM).sca(0.5);
			home.on("click",()=>{
				zgo("index.html");
			});
	
	
	        const dialText=new LabelOnArc({
	          font:"Ubuntu",
	          label:"Make Drake dance",
	          color:white,
	          size:30,
	          radius:310}).rot(180).pos(0,1160,CENTER,BOTTOM,firstScreen);
	          
	        const dialText1=new LabelOnArc({
	          font:"Ubuntu",
	          label:"Make Drake rich and famous",
	          color:white,
	          size:30,
	          radius:310}).rot(0).pos(0,1210,CENTER,BOTTOM,firstScreen);
	        
	
	        const buttonLabel=new Label({
	          text:"Make Drake Dance",
	          font:"Anton",
	          color:white,
	          size:60
	        })
	
	        const button=new Button({
	          width:600,
	          height:150,
	          label:buttonLabel,
	          rollBackgroundColor:pink,
	          corner:20
	        }).pos(0,600,CENTER,BOTTOM,firstScreen);
	
	
	        const buttonLabel2=new Label({
	          text:"Make Drake Rich",
	          font:"Anton",
	          color:white,
	          size:60
	        })
	
	        const button2=new Button({
	          width:600,
	          height:150,
	          label:buttonLabel2,
	          rollBackgroundColor:pink,
	          corner:20
	        }).pos(0,400,CENTER,BOTTOM,firstScreen);
	
	       
	
	        new Circle(280,pink).pos(0,900,CENTER,BOTTOM,firstScreen);
	        head=new Pic("head.png").pos(382,410,CENTER,BOTTOM,firstScreen).reg(CENTER);
	
	       
	
	        button.on("click",()=>{
	              zog("okay");
	              firstScreen.removeFrom();
	              dance();
	
	          })
	
	          button2.on("click",()=>{
	              zog("hello");
	              firstScreen.removeFrom();
	              rich();
	
	           })
	       
	    
	        F.on("deviceorientation", (e) => {
	          
	          
	          if (e.rotation.y >= 0 && e.rotation.y <= 40) {
	            head.rot(20);
	            S.update();
	
	      
	          } else if (e.rotation.y >= -40 && e.rotation.y < 0) {
	            head.rot(-20);
	            S.update();
	
	            
	            
	           }
	
	        });
	
	       
	       
	
	        let right;
	        let wrong;
	
	
	  function dance() {
	
	    let dance1=new Container(W,H).center();
	
	    soundInstance.stop();
	    const heading2=new Label({
	            text:"Make Drake Dance", 
	            size:70, 
	            font:"Ubuntu", 
	            color:white,
	          }).pos(0,400,CENTER,TOP,dance1);
	
	         
	    const heading3=new Label({
	      text:"Rotate your phone to make him dance!", 
	      size:50, 
	      font:"Ubuntu", 
	      color:white,lineWidth:700, 
	      lineHeight:80, 
	      align:CENTER
	    }).pos(0,500,CENTER,TOP,dance1);
	
	   new Aud({file:"hotlinebling.mp3", loop:true}).play();
	    F.on("deviceorientation", (e) => {
	      if (e.rotation.y >= 0 && e.rotation.y <= 40) {
	       
	        if (wrong) {
	          wrong.alp(0); 
	        }
	        if (!right) {
	
	          right=new Pic("dance1.png")
	          .loc(600,1500,dance1)
	          .sca(0.75)
	          .reg(CENTER);
	        }
	        right.alp(1); 
	  
	        S.update();
	      } else if (e.rotation.y >= -40 && e.rotation.y < 0) {
	        
	        if (right) {
	          right.alp(0);
	        }
	        if (!wrong) {
	          wrong=new Pic("dance2.png")
	          .loc(600,1500,dance1)
	          .sca(0.75)
	          .reg(CENTER);
	        
	        }
	        wrong.alp(1); 
	        S.update();
	      }
	      })
	    }
	        
	let container1 = new Container(W, H).center();
    let container2 = new Container(W, H).center();
    let container3 = new Container(W, H).center();


	let pic1=new Pic("drake.jpg").addTo(container1);
	let pic2=new Pic("drake.jpg").addTo(container1);
	let pic3=new Pic("drake.jpg").addTo(container1);
let close;
let info;
let cont;

	pic1.on("click", ()=>{

		cont=new Container(W,H).center();
		info=new Label("Hello").center(cont);
		close=new Pic("close.png").center(cont);

		S.update();


	})
	close.on("click",()=>{
	cont.removeFrom();

	S.update();
	})



	
	    function rich() {
	
	let rich1=new Container(W,H).center();


	
	soundInstance.stop();
	new Aud("nonstop.mp3").play();
	const heading2=new Label({
	        text:"Help Drake be number 1!", 
	        size:70, 
	        font:"Ubuntu", 
	        color:white,
	      }).pos(0,400,CENTER,TOP,rich1);
	
	     
	const heading3=new Label({
	  text:"Tilt your phone to reveal more about Drake!", 
	  size:50, 
	  font:"Ubuntu", 
	  color:white,lineWidth:700, 
	  lineHeight:80, 
	  align:CENTER
	}).pos(0,500,CENTER,TOP,rich1);


	
	
	
        
          
	
		}
	  
		 

		F.on("deviceorientation", (e) => {
    if (e.rotation.y >= -40 && e.rotation.y < -10) {
        // Handle the first range: -40 to -10
        if (!container1.isOnStage) {
            container1.addTo();
            container1.isOnStage = true;
        }
        if (container2.isOnStage) {
            container2.removeFrom();
            container2.isOnStage = false;
        }
        if (container3.isOnStage) {
            container3.removeFrom();
            container3.isOnStage = false;
        }
    } else if (e.rotation.y >= -10 && e.rotation.y <= 20) {
        // Handle the second range: -10 to 20
        if (!container2.isOnStage) {
            container2.addTo();
            container2.isOnStage = true;
        }
        if (container1.isOnStage) {
            container1.removeFrom();
            container1.isOnStage = false;
        }
        if (container3.isOnStage) {
            container3.removeFrom();
            container3.isOnStage = false;
        }
    } else if (e.rotation.y > 20 && e.rotation.y <= 40) {
        // Handle the third range: 20 to 40
        if (!container3.isOnStage) {
            container3.addTo();
            container3.isOnStage = true;
        }
        if (container1.isOnStage) {
            container1.removeFrom();
            container1.isOnStage = false;
        }
        if (container2.isOnStage) {
            container2.removeFrom();
            container2.isOnStage = false;
        }
    }
    // Update the stage after changes
    S.update();
});
	
	     
	  
	
	      
	  
	
	        
	  const permissionType = "deviceorientation"; 
	  const ask = new PermissionAsk(init, permissionType);
	  function init(yes) {
	    
	    const errorPane = new Pane("SENSOR not available", yellow);
	    if (yes) {
	    
	      label.text =
	        decimals(e.rotation.x) +
	        "," +
	        decimals(e.rotation.y) +
	        "," +
	        decimals(e.rotation.z);
	      S.update();
	    } else {
	      errorPane.show();
	    }
	  }
	
	     
	       
	} // end runZapp

      } // end ready
    </script>
    
	<meta name="viewport" content="width=device-width, user-scalable=no" />
  </head>
  <body></body>
</html>

